# No Tiene Nombre Podcast Website

This is a React 19 + Vite 6.x + TypeScript + Tailwind CSS 4.x podcast website deployed via Azure Static Web Apps. The site fetches episode data from an RSS feed and generates a modern, performant web experience.

Always reference these instructions first and fallback to search or bash commands only when you encounter unexpected information that does not match the info here.

## Working Effectively

### Prerequisites and Setup
- Install Node.js 18.17.0 (exact version in `.nvmrc`): `nvm use` or manually install from nodejs.org
- Verify versions: `node --version` (should be >= 18.17.0) and `npm --version` (should be >= 9.0.0)

### Bootstrap and Build Commands
```bash
# Install dependencies
npm install                    # Takes ~2 minutes. NEVER CANCEL - dependency resolution can be slow.

# Fetch latest RSS episodes (standalone)
npm run rss:snapshot          # Takes ~1 second. Fetches from ivoox.com and updates public/episodes.json

# Build for production
npm run build                 # Takes ~2 minutes total. NEVER CANCEL. Set timeout to 10+ minutes.
                             # Includes RSS prebuild step + TypeScript compilation + Vite build + PWA generation

# Development server
npm run dev                   # Starts on http://localhost:5173. Ready in ~1 second.

# Preview production build locally
npm run preview               # Starts on http://localhost:4173. Serves built files from dist/
```

### Build Process Details
The build follows this sequence:
1. **Prebuild**: Executes `npm run rss:snapshot` automatically (fetches RSS from `src/lib/podcast-config.json`)
2. **TypeScript**: `tsc -b --noCheck` (type-checking disabled for speed)
3. **Vite Build**: Bundles React app with tree-shaking and minification
4. **PWA Generation**: Creates service worker and web manifest

**CRITICAL**: Build takes 2+ minutes total. NEVER CANCEL - set timeout to 10+ minutes minimum.

### Linting and Code Quality
```bash
# ESLint - CURRENTLY BROKEN
npm run lint                  # FAILS: Missing eslint.config.js file - known issue, skip for now
```

**Known Issue**: ESLint configuration is missing. The `npm run lint` command will fail until an `eslint.config.js` file is created. This is NOT used in CI pipelines currently, so it's safe to skip.

## Validation Scenarios

### Always Test After Changes
1. **Build Validation**: `npm run build` must complete successfully (expect ~2 minutes)
2. **Development Server**: `npm run dev` - visit http://localhost:5173 and verify:
   - Homepage loads with episode listings
   - Episode cards display properly with titles, descriptions, dates
   - Audio players are present and functional
   - RSS feed data loads (check browser network tab)
3. **Production Preview**: `npm run preview` - visit http://localhost:4173 and verify same functionality
4. **RSS Data Pipeline**: `npm run rss:snapshot` - verify `public/episodes.json` is updated with latest episodes

### Manual Testing Scenarios
After making changes, **ALWAYS** test these user workflows:
- **Episode Browsing**: Navigate through episode listings, verify titles and dates display correctly
- **Audio Playback**: Click play on an episode, verify audio controls work
- **Responsive Design**: Test on mobile viewport (375px width) - navigation should work properly
- **RSS Feed Fallback**: Verify local fallback works by checking `/episodes.json` endpoint
- **PWA Features**: Check that manifest.json loads and service worker registers (dev tools)

## Key Project Structure

```text
src/                          # React application source
├── components/               # React components (HostBioCard, EpisodeCard, etc.)
├── hooks/                   # Custom React hooks (useShare, use-mobile)
├── lib/                     # Utilities and configuration
│   └── podcast-config.json  # RSS feed URL configuration
└── main.tsx                 # Application entry point

scripts/                     # Build and automation scripts
├── fetch-rss.mjs           # RSS feed fetching (runs in prebuild)
└── screenshots.spec.js     # Playwright screenshot generation

public/                      # Static assets and generated files
├── episodes.json           # RSS snapshot (generated daily)
├── episodes.xml            # Raw RSS backup (generated daily)
├── icons/                  # PWA icons and favicons
└── manifest.json           # PWA manifest

dist/                       # Build output (generated by Vite)
├── assets/                 # Bundled JS/CSS
├── index.html             # Main HTML file
└── sw.js                  # Service worker
```

## Time Expectations and Timeouts

**CRITICAL - NEVER CANCEL these operations:**
- `npm install`: ~2 minutes (dependency resolution) - Set timeout: 10+ minutes
- `npm run build`: ~2 minutes (RSS + TypeScript + Vite + PWA) - Set timeout: 10+ minutes  
- `npm run rss:snapshot`: ~1 second (network fetch) - Set timeout: 2+ minutes
- `npm run dev`: ~1 second startup - Set timeout: 1+ minutes
- `npm run preview`: ~1 second startup - Set timeout: 1+ minutes

**Playwright Issues**: `npm run screenshots:install` may fail in CI environments due to browser download issues. This is expected and can be skipped.

## Content Pipeline and RSS

### RSS Feed Configuration
- Live RSS URL: Configured in `src/lib/podcast-config.json` (currently ivoox.com feed)
- Snapshot files: `public/episodes.json` and `public/episodes.xml`
- Update schedule: Daily at 03:00 UTC via GitHub Action

### Data Flow
1. **Runtime (primary)**: App fetches live RSS with `cache: 'no-store'` for fresh data
2. **Fallback**: If live fetch fails, falls back to local `/episodes.json`
3. **Automation**: GitHub Action runs daily to refresh local snapshots and trigger deploy

## Common Development Tasks

### Adding New Components
- Create in `src/components/` with TypeScript
- Use Tailwind CSS for styling
- Follow existing patterns (functional components + hooks)
- Import and use in other components

### Modifying Episode Display
- Main component: `src/components/EpisodeCard.tsx`
- RSS parsing logic: `scripts/fetch-rss.mjs`
- Type definitions: Check existing TypeScript interfaces

### Styling Changes
- Uses Tailwind CSS 4.x with custom configuration in `tailwind.config.js`
- Custom design system with Radix UI components
- Responsive design is mobile-first

### Performance Monitoring
- Lighthouse CI runs on all PRs (see `.github/workflows/lighthouse-ci.yml`)
- Core Web Vitals are tracked and must pass
- PWA features are automatically generated

## CI/CD and Deployment

### GitHub Actions Workflows
- **Azure SWA Deploy**: Triggers on push to main - deploys to production
- **Lighthouse CI**: Performance testing on PRs and main
- **RSS Snapshot**: Daily at 03:00 UTC - refreshes episode data

### Deployment Pipeline
1. Code pushed to `main`
2. Azure Static Web Apps GitHub Action runs
3. Executes `npm install` → `npm run build` → deploys `dist/` folder
4. Live site updates at notienenombre.com

### Before Committing
```bash
# Essential validation commands:
npm run build                 # Must complete successfully
npm run preview              # Manually verify functionality
# Note: npm run lint currently fails - skip for now
```

## Environment and Dependencies

### Node.js Requirements
- **Version**: 18.17.0 (specified in `.nvmrc` and `package.json` engines)
- **Package Manager**: npm >= 9.0.0
- **Important**: Use exact Node version to avoid build inconsistencies

### Key Dependencies
- **React**: 19.0.0 (latest stable)
- **Vite**: 6.3.5 (build tool)
- **Tailwind CSS**: 4.1.11 (styling)
- **TypeScript**: ~5.7.2 (type checking)
- **Radix UI**: Component library for accessibility
- **Playwright**: Screenshot generation (may fail in CI)

### Build Artifacts
- **Size**: dist/ ~1.4MB, node_modules/ ~674MB
- **Output**: Static files ready for CDN deployment
- **PWA**: Service worker and manifest included automatically

## Troubleshooting

### Common Issues
1. **ESLint fails**: Known issue, missing config file - skip linting for now
2. **Playwright install fails**: Browser download issues in CI - skip screenshots
3. **Build timeout**: Increase timeout to 10+ minutes, builds can be slow
4. **RSS fetch fails**: Check network connectivity and RSS URL in `podcast-config.json`

### Debug Commands
```bash
# Check Node/npm versions
node --version && npm --version

# Verify RSS endpoint
curl -s "https://www.ivoox.com/feed_fg_f1277993_filtro_1.xml" | head -20

# Check build output
ls -la dist/

# Test servers manually
curl -s -o /dev/null -w "%{http_code}" http://localhost:5173/  # Dev server
curl -s -o /dev/null -w "%{http_code}" http://localhost:4173/  # Preview server
```

## Security and Best Practices

### Code Quality
- TypeScript for type safety
- Functional React components with hooks
- Accessible markup with semantic HTML
- Performance-first design patterns

### Security Considerations
- No user authentication (public content only)
- Static site generation for security
- RSS feed is fetched from trusted source
- No sensitive data in client-side code

---

**Remember**: Always build, preview, and manually test changes before committing. The goal is a fast, accessible podcast website that works reliably for all users.